# Midora AI Frontend Coding Guidelines

## Code Structure & Organization
- Follow the established directory structure with components in /src/components/, utilities in /src/lib/, and types in /src/types/
- Create reusable components in /src/components/ui/ and feature-specific components in appropriate subdirectories
- Use TypeScript for all new files and provide proper type definitions in /src/types/
- Import utilities from /src/lib/utils.ts and create new utility functions there when needed
- Use kebab case notation for file names for hooks, libs, components, pages and all type of files

## Next.js Best Practices
- Use App Router (Next.js 13+) structure with files in /src/app/ directory
- Implement proper loading states using loading.tsx files
- Handle errors gracefully with error.tsx files
- Use Server Components by default and only add 'use client' when necessary for interactivity
- Implement proper SEO with metadata API in layout and page files
- API calls will be used through hooks, make sure to create proper hooks and call APIs from there
- From hooks Error in all API calls src/hooks will be thrown in object, object will contain:
  - error_message -> system defined
  - backend error response

## Styling & UI
- Use Tailwind CSS utility classes for styling
- Follow mobile-first responsive design principles
- Maintain consistent spacing, colors, and typography throughout the application
- Create reusable component variants using class variance authority (cva) pattern when appropriate
- Make sure to define and reuse components, if there is some UI component needed then check in src/components/ui in related files and folder, if not present then create folder related to that component and place its file inside it. Like if button is needed then check in src/components/ui/buttons, if not present then create folder and create related specific component in it. A folder can have multiple components, all are defined based on their use and nature. Like buttons folder can have primary button, secondary button and more. Follow same practices

## Theme System Guidelines

### Centralized Theme Management
- Use the centralized theme hook: `src/hooks/use-theme.tsx`
- Theme data persists on page reload through localStorage
- Theme context provides: `theme`, `setTheme`, `toggleTheme`, and `mounted` state

### Font Size Classes
Use the following standardized font size classes throughout the application:
- `.app-text-xs` - 10px
- `.app-text-sm` - 12px  
- `.app-text-md` - 14px (default)
- `.app-text-lg` - 16px
- `.app-text-xl` - 18px
- `.app-text-2xl` - 20px
- `.app-text-3xl` - 24px
- `.app-text-4xl` - 28px
- `.app-text-5xl` - 32px

### Color Classes
Use the following theme-aware color classes:

#### Background Colors
- `.app-bg-primary` - Primary background
- `.app-bg-secondary` - Secondary background
- `.app-bg-tertiary` - Tertiary background
- `.app-bg-card` - Card background
- `.app-bg-button` - Button background
- `.app-bg-button-hover` - Button hover state
- `.app-bg-button-active` - Button active state
- `.app-bg-button-inactive` - Button inactive state
- `.app-bg-button-disabled` - Button disabled state

#### Text Colors
- `.app-text-primary` - Primary text color
- `.app-text-secondary` - Secondary text color
- `.app-text-tertiary` - Tertiary text color
- `.app-text-muted` - Muted text color
- `.app-text-brand` - Brand text color
- `.app-text-accent` - Accent text color
- `.app-text-success` - Success text color
- `.app-text-warning` - Warning text color
- `.app-text-error` - Error text color
- `.app-text-info` - Info text color

#### Border Colors
- `.app-border-primary` - Primary border
- `.app-border-secondary` - Secondary border
- `.app-border-focus` - Focus border
- `.app-border-error` - Error border
- `.app-border-success` - Success border

### Default Font Size
- The application uses 14px as the default font size
- This is set in the HTML root and body elements in globals.css
- All components should use the `.app-text-*` classes instead of hardcoded font sizes

### Theme Usage Examples
```tsx
// Correct usage
<div className="app-bg-primary app-text-primary app-text-md">
  <h1 className="app-text-2xl app-text-brand">Title</h1>
  <p className="app-text-sm app-text-secondary">Subtitle</p>
</div>

// Theme hook usage
import { useTheme } from '@/hooks/use-theme'

function MyComponent() {
  const { theme, toggleTheme } = useTheme()
  
  return (
    <button onClick={toggleTheme}>
      Current theme: {theme}
    </button>
  )
}
```

## API & Data Handling
- Place API routes in /src/app/api/ directory
- Implement proper error handling and status codes in API routes
- Use proper TypeScript types for API request/response bodies
- Validate input data using Zod or similar validation library
- For every possible API error_type. In order to check error types, check midora.ai-backend/app/constants/error_types.py
- Backend also returns the error message but we will not show that, we will only show error messages from the frontend defined error messages according to i18n

## Performance & Optimization
- Optimize images using Next.js Image component
- Implement proper loading states and skeleton screens
- Use dynamic imports for heavy components when appropriate
- Follow Next.js performance best practices for bundle optimization

## Docker Considerations
- Ensure new dependencies are added to package.json for proper Docker builds
- Test that new features work correctly in the Docker container environment
- Keep environment variables in .env.local and document them in .env.example

## Code Quality
- Write clean, readable code with descriptive variable and function names
- Add JSDoc comments for complex functions and components
- Implement proper error boundaries where needed
- Follow consistent code formatting and naming conventions

## Testing & Documentation
- Write unit tests for utility functions in /tests/utils/
- Create component tests in /tests/components/
- Update README.md with any new setup instructions or feature documentation
- Document any new environment variables or configuration changes
- Create proper documentation of these in docs folder, make sure every module will have its own separate documentation. In order to create documentation first check if the similar API doc is already provided, if yes then update that specific documentation based on the new changes
- If document is not there then create a new one
- Use a simple and concise documentation which will cover all the aspects and fulfill software documentation standards

## Backend API Calling
- Define all backend APIs in separate API folder and use from there, for every API create specific folder. Inside that folder create API calling file and types file related to it. For example if we have to play with auth API then define auth folder in API in src/api/auth. Define API file and types file in it and use it

## Multi Language Support
- Enable i18n and move all textual content of the app to related language files according to i18n. For now we will only use English. Make sure to check first i18n files to add a new content, if content is not present then define it in an appropriate file according to the content for all languages that our app supports

## Theme System Migration Notes
- All components should use the new `.app-*` classes instead of direct CSS variables
- The centralized theme hook in `src/hooks/use-theme.tsx` replaces the old theme files
- Theme persistence is handled automatically through localStorage
- Dark and light mode switching is seamless with the new system
- Font sizes are standardized and consistent across the application
